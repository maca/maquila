// Maker.js
// version: 0.1.0
// author: Macario Ortega
// license: MIT
(function(){var a,b,c;c={define:function(a,b){return null==b&&(b=Object),this.factories||(this.factories={}),this.factories[a]=new c.Factory(b)},factory:function(a){return this.factories||(this.factories={}),this.factories[a]||function(){throw"factory '"+a+"' is not defined"}()},attributes:function(a,b){return this.factory(a).attributes(b)},build:function(a,b){return this.factory(a).build(b)},create:function(a,b){return this.factory(a).create(b)},resetSequences:function(){var a,b,c;c=this.factories;for(b in c)a=c[b],a.resetSequence();return this}},a=function(){function a(a,b){this.factory=a,this.length=b}return a.prototype.attributes=function(a){var b,c,d,e;for(e=[],b=c=1,d=this.length;d>=1?d>=c:c>=d;b=d>=1?++c:--c)e.push(this.factory.attributes(a));return e},a.prototype.build=function(a){var b,c,d,e;for(e=[],b=c=1,d=this.length;d>=1?d>=c:c>=d;b=d>=1?++c:--c)e.push(this.factory.build(a));return e},a.prototype.create=function(a){var b,c,d,e;for(e=[],b=c=1,d=this.length;d>=1?d>=c:c>=d;b=d>=1?++c:--c)e.push(this.factory.create(a));return e},a}(),b=function(){function a(a){this.start=a||1,this.sequence=this.start}return a.prototype.increment=function(){return this.sequence+=1},a.prototype.reset=function(){return this.sequence=this.start},a}(),c.Factory=function(){function d(a){this.Constructor=a,this.defaultAttrs={},this.setNewCounter()}return d.prototype.setNewCounter=function(a){return null==a&&(a=1),this.counter=new b(a),this},d.prototype.defaults=function(a){var b,c;for(b in a)c=a[b],this.defaultAttrs[b]=c;return this},d.prototype.attributes=function(a){var b,c,d,e;null==a&&(a={}),b={},e=this.defaultAttrs;for(c in e)d=e[c],b[c]=d;for(c in a)d=a[c],b[c]=d;for(c in b)d=b[c],b[c]="function"==typeof d?d.apply(this,[b]):d;return this.incrementSequence(),b},d.prototype.build=function(a){return new this.Constructor(this.attributes(a))},d.prototype.create=function(a){return"function"==typeof this.Constructor.create?this.Constructor.create(this.attributes(a)):this.build(a)},d.prototype.arrayOf=function(b){return new a(this,b)},d.prototype.extend=function(a){var b,d,e,f,g;b={},e=c.factory(a),this.counter=e.counter,g=e.defaultAttrs;for(d in g)f=g[d],b[d]=f;return this.defaults(b),this},d.prototype.sequence=function(){return this.counter.sequence},d.prototype.incrementSequence=function(){return this.counter.increment()&&this},d.prototype.resetSequence=function(){return this.counter.reset()&&this},d}(),("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports.Maquila=c:this.Maquila=c}).call(this);